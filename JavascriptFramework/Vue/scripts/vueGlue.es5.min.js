"use strict";(function(){function i(n,r,u){var f,e;if(n&&!t.has(n._MappedId)&&typeof n=="object"){if(t.set(n._MappedId,n),Array.isArray(n)){u(n);n.forEach(function(n){return i(n,r,u)});return}for(f in n)n.hasOwnProperty(f)&&(e=n[f],typeof e!="function")&&(r(n,f),i(e,r,u))}}function o(n,t){this.listen=function(){this.subscriber=n()};this.silence=function(n){this.subscriber();t(n);this.listen()}}function s(n,t){return function(i){for(var u=[],f=[],e=[],o=i.length,r=0;r<o;r++)u.push(i[r].value),f.push(i[r].status),e.push(i[r].index);t.TrackCollectionChanges(n,u,f,e)}}function h(n,t){var i=s(n,t),r=n.subscribe(i);n.silentSplice=function(){r();var t=n.splice.apply(n,arguments);return r=n.subscribe(i),t}}function c(n,t,i){var r=!1;return function(u,f){if(r){r=!1;return}if(u!==f){if(Array.isArray(u)){var e=[0,f.length].concat(u);f.splice.apply(f,e);r=!0;i[t]=f;return}n.TrackChanges(i,t,u)}}}function e(n){var t=n.status,i=n.command,r=n.inform,u=n.callBack;this.$watch("$data.__window__.State",function(n){var f=this,r;n.name==t&&(r=function(){return f.$data.__window__[i].Execute()},u(r))});this.$nextTick(function(){this.$data.__window__[r]=!0})}var t,n;console.log("VueGlue loaded");t=new Map;n=null;var u=function(t,r){return n?(i(t,function(t,i){t.__silenter||Object.defineProperty(t,"__silenter",{value:{}});var f=t.__silenter,e=c(r,i,t),u=new o(function(){return n.$watch(function(){return t[i]},e)},function(n){return t[i]=n});u.listen();f[i]=u},function(n){return h(n,r)}),t):t},f,l=new Promise(function(n){f=n}),a={methods:{enumImage:function(n,t){var i,r;return!n instanceof Enum?null:(i=t||this.enumImages,!i)?null:(r=i[n.type],r?r[n.name]:null)}}};var r=Vue.adapter,v=r.addOnReady({},function(){var n=this;e.call(this,{status:"Opened",command:"EndOpen",inform:"IsListeningOpen",callBack:function(t){return n.onOpen(t)}})}),y=r.addOnReady({},function(){var n=this;e.call(this,{status:"Closing",command:"CloseReady",inform:"IsListeningClose",callBack:function(t){return n.onClose(t)}})}),p={methods:{asPromise:function(n){return function(t){return new Promise(function(i,r){var u={fullfill:function(n){i(n)},reject:function(n){r(new Error(n))}};n.Execute(t,u)})}}}},w={enumMixin:a,openMixin:v,closeMixin:y,promiseMixin:p,commandMixin:Vue.__commandMixin,inject:u,register:function(t,i){var e,o;return console.log("VueGlue register"),e=Vue._vmMixin,!e||Array.isArray(e)||(e=[e]),o=r.addOnReady({el:"#main",mixins:e,data:t},function(){f(null)}),n=new Vue(o),window.vm=n,u(t,i)},ready:l};window.glueHelper=w})();