"use strict";(function(){function w(n,t,i){setTimeout(function(){return s(n,t,i)},0)}function s(t,i,r){var u=t[n];if(u){nt(u,i,r);return}t[i]=r}function b(n,t,i){setTimeout(function(){return k(n,t,i)},0)}function k(n,t,i){s(n,t,i);r(i)}function d(){setTimeout(g.bind(null,Array.from(arguments)),0)}function g(t){for(var r,u,f=t.length,i=0;i<f;i++)(r=t[i],u=r[n],u)&&(tt(u),delete r[n])}function nt(n,t,i){var r=n.listeners[t];r.watch();n.father[t]=i;h(n,r,t)}function tt(n){var t=n.listeners,i,r;for(i in t)r=t[i],r.watch();n.listeners={}}function h(n,i,r){i.watch=t.$watch(function(){return n.father[r]},i.callback)}function c(n,t,i){var r={callback:i};h(n,r,t);n.listeners[t]=r}function l(n){this.father=n;this.listeners={}}function it(t,i,u){Vue.set(t,i,u);t[n]||Object.defineProperty(t,n,{value:new l(t),configurable:!0});var f=t[n];c(f,i,a(i,t));r(u)}function f(n,t,r){var s,u,h,c,e,o;if(n&&!i.has(n._MappedId)){if(i.set(n._MappedId,n),Array.isArray(n)){for(r(n),s=n.length,u=0;u<s;u++)h=n[u],f(h,t,r);return}c=!n.__readonly__;for(e in n)(o=n[e],typeof o!="function")&&(c&&t(n,e),f(o,t,r))}}function rt(n){return function(t){for(var r=[],f=[],e=[],o=t.length,i=0;i<o;i++)r.push(t[i].value),f.push(t[i].status),e.push(t[i].index);u.TrackCollectionChanges(n,r,f,e)}}function ut(n){var t=rt(n),i=n.subscribe(t);n.silentSplice=function(){i();var r=n.splice.apply(n,arguments);return i=n.subscribe(t),r}}function a(n,t){var i=!1;return function(r,f){if(i){i=!1;return}if(r!==f){if(Array.isArray(r)){var e=[0,f.length].concat(r);f.splice.apply(f,e);i=!0;t[n]=f;return}u.TrackChanges(t,n,r)}}}function y(n){var t=n.status,i=n.command,r=n.inform,u=n.callBack;this.$watch("$data.Window.State",function(n){var f=this,r;n.name===t&&(r=function(){return f.$data.Window[i].Execute()},u(r))});this.$nextTick(function(){this.$data.Window[r]=!0})}var i,p;console.log("VueGlue loaded");var n="__silenter",t=null,u=null;i=new Map;i.set(undefined,null);var r=function(i){return t?(f(i,function(t,i){t[n]||Object.defineProperty(t,n,{value:new l(t),configurable:!0});var r=t[n];c(r,i,a(i,t))},function(n){return ut(n)}),i):i},v,ft=new Promise(function(n){v=n}),et={methods:{enumImage:function(n,t){var i,r;return!n instanceof Enum?null:(i=t||this.enumImages,!i)?null:(r=i[n.type],r?r[n.name]:null)}}};var e=Vue.adapter,ot=e.addOnReady({},function(){var n=this;y.call(this,{status:"Opened",command:"EndOpen",inform:"IsListeningOpen",callBack:function(t){return n.onOpen(t)}})}),st=e.addOnReady({},function(){var n=this;y.call(this,{status:"Closing",command:"CloseReady",inform:"IsListeningClose",callBack:function(t){return n.onClose(t)}})}),ht={methods:{asPromise:function(n){return function(t){return new Promise(function(i,r){var u={fullfill:function(n){i(n)},reject:function(n){r(new Error(n))}};n.Execute(t,u)})}}}},o={props:{command:{type:Object,"default":null},arg:{type:Object,"default":null}},computed:{canExecute:function(){return this.command===null?!1:this.command.CanExecuteValue}},watch:{"command.CanExecuteCount":function(){this.computeCanExecute()},arg:function(){this.computeCanExecute()}},methods:{computeCanExecute:function(){this.command!==null&&this.command.CanExecute(this.arg)},execute:function(){if(this.canExecute){var n=this.beforeCommand;!n||n();this.command.Execute(this.arg)}}}};o=Vue.adapter.addOnReady(o,function(){var n=this;setTimeout(function(){!n.arg||n.computeCanExecute()})});p={enumMixin:et,openMixin:ot,closeMixin:st,promiseMixin:ht,commandMixin:o,silentChange:w,addProperty:it,inject:r,silentChangeAndInject:b,disposeSilenters:d,register:function(n,i){var f,o;return console.log("VueGlue register"),u=i,f=Vue._vmMixin,!f||Array.isArray(f)||(f=[f]),o=e.addOnReady({el:"#main",mixins:f,data:n},function(){v(null)}),t=new Vue(o),window.vm=t,r(n)},ready:ft};window.glueHelper=p})();