"use strict";(function(){function a(n,t,i){setTimeout(function(){return o(n,t,i)},0)}function o(t,i,r){var u=t[n];if(u){b(u,i,r);return}t[i]=r}function v(n,t,i,r){setTimeout(function(){return y(n,t,i,r)},0)}function y(n,t,i,r){o(n,t,i);u(i,r)}function p(){setTimeout(w.bind(null,Array.from(arguments)),0)}function w(t){for(var r,u,f=t.length,i=0;i<f;i++)(r=t[i],u=r[n],u)&&(k(u),delete r[n])}function b(n,t,i){var r=n.listeners[t];r.watch();n.father[t]=i;s(n,r,t)}function k(n){var t=n.listeners,i,r;for(i in t)r=t[i],r.watch();n.listeners={}}function s(n,i,r){i.watch=t.$watch(function(){return n.father[r]},i.callback)}function d(n,t,i){var r={callback:i};s(n,r,t);n.listeners[t]=r}function g(n){this.father=n;this.listeners={}}function r(n,t,u){var s,f,h,c,e,o;if(n&&!i.has(n._MappedId)){if(i.set(n._MappedId,n),Array.isArray(n)){for(u(n),s=n.length,f=0;f<s;f++)h=n[f],r(h,t,u);return}c=!n.__readonly__;for(e in n)(o=n[e],typeof o!="function")&&(c&&t(n,e),r(o,t,u))}}function nt(n,t){return function(i){for(var u=[],f=[],e=[],o=i.length,r=0;r<o;r++)u.push(i[r].value),f.push(i[r].status),e.push(i[r].index);t.TrackCollectionChanges(n,u,f,e)}}function tt(n,t){var i=nt(n,t),r=n.subscribe(i);n.silentSplice=function(){r();var t=n.splice.apply(n,arguments);return r=n.subscribe(i),t}}function it(n,t,i){var r=!1;return function(u,f){if(r){r=!1;return}if(u!==f){if(Array.isArray(u)){var e=[0,f.length].concat(u);f.splice.apply(f,e);r=!0;i[t]=f;return}n.TrackChanges(i,t,u)}}}function c(n){var t=n.status,i=n.command,r=n.inform,u=n.callBack;this.$watch("$data.__window__.State",function(n){var f=this,r;n.name==t&&(r=function(){return f.$data.__window__[i].Execute()},u(r))});this.$nextTick(function(){this.$data.__window__[r]=!0})}var n,t,i,l;console.log("VueGlue loaded");n="__silenter";t=null;i=new Map;i.set(undefined,null);var u=function(i,u){return t?(r(i,function(t,i){t[n]||Object.defineProperty(t,n,{value:new g(t),configurable:!0});var r=t[n];d(r,i,it(u,i,t))},function(n){return tt(n,u)}),i):i},h,rt=new Promise(function(n){h=n}),ut={methods:{enumImage:function(n,t){var i,r;return!n instanceof Enum?null:(i=t||this.enumImages,!i)?null:(r=i[n.type],r?r[n.name]:null)}}};var f=Vue.adapter,ft=f.addOnReady({},function(){var n=this;c.call(this,{status:"Opened",command:"EndOpen",inform:"IsListeningOpen",callBack:function(t){return n.onOpen(t)}})}),et=f.addOnReady({},function(){var n=this;c.call(this,{status:"Closing",command:"CloseReady",inform:"IsListeningClose",callBack:function(t){return n.onClose(t)}})}),ot={methods:{asPromise:function(n){return function(t){return new Promise(function(i,r){var u={fullfill:function(n){i(n)},reject:function(n){r(new Error(n))}};n.Execute(t,u)})}}}},e={props:{command:{type:Object,"default":null},arg:{type:Object,"default":null}},computed:{canExecute:function(){return this.command===null?!1:this.command.CanExecuteValue}},watch:{"command.CanExecuteCount":function(){this.computeCanExecute()},arg:function(){this.computeCanExecute()}},methods:{computeCanExecute:function(){this.command!==null&&this.command.CanExecute(this.arg)},execute:function(){if(this.canExecute){var n=this.beforeCommand;!n||n();this.command.Execute(this.arg)}}}};e=Vue.adapter.addOnReady(e,function(){var n=this;setTimeout(function(){!n.arg||n.computeCanExecute()})});l={enumMixin:ut,openMixin:ft,closeMixin:et,promiseMixin:ot,commandMixin:e,silentChange:a,inject:u,silentChangeAndInject:v,disposeSilenters:p,register:function(n,i){var r,e;return console.log("VueGlue register"),r=Vue._vmMixin,!r||Array.isArray(r)||(r=[r]),e=f.addOnReady({el:"#main",mixins:r,data:n},function(){h(null)}),t=new Vue(e),window.vm=t,u(n,i)},ready:rt};window.glueHelper=l})();