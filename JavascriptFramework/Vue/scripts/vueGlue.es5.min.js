"use strict";(function(){function w(n,t,i){setTimeout(function(){return c(n,t,i)},0)}function c(t,i,r){var u=t[n];if(u){nt(u,i,r);return}t[i]=r}function b(n,t,i){setTimeout(function(){return k(n,t,i)},0)}function k(n,i,r){c(n,i,r);t(r)}function d(){setTimeout(g.bind(null,Array.from(arguments)),0)}function g(t){for(var r,u,f=t.length,i=0;i<f;i++)(r=t[i],u=r[n],u)&&(tt(u),delete r[n])}function nt(n,t,i){var r=n.listeners[t];r.watch();n.father[t]=i;l(n,r,t)}function tt(n){var t=n.listeners,i,r;for(i in t)r=t[i],r.watch();n.listeners={}}function l(n,t,r){t.watch=i.$watch(function(){return n.father[r]},t.callback)}function it(n,t,i){var r={callback:i};l(n,r,t);n.listeners[t]=r}function rt(n){this.father=n;this.listeners={}}function ut(n,i,r){f(n,i,r);e(n,i);t(r)}function e(t,i){var r=t[n];r||(r=new rt(t),Object.defineProperty(t,n,{value:r,configurable:!0}));it(r,i,a(i,t))}function o(n,t,i){var s,u,h,c,f,e;if(n&&!r.has(n._MappedId)){if(r.set(n._MappedId,n),Array.isArray(n)){for(i(n),s=n.length,u=0;u<s;u++)h=n[u],o(h,t,i);return}c=!n.__readonly__;for(f in n)(e=n[f],typeof e!="function")&&(c&&t(n,f),o(e,t,i))}}function ft(n){return function(t){for(var r=[],f=[],e=[],o=t.length,i=0;i<o;i++)r.push(t[i].value),f.push(t[i].status),e.push(t[i].index);u.TrackCollectionChanges(n,r,f,e)}}function et(n){var t=ft(n),i=n.subscribe(t);n.silentSplice=function(){i();var r=n.splice.apply(n,arguments);return i=n.subscribe(t),r}}function a(n,t){var i=!1;return function(r,f){if(i){i=!1;return}if(r!==f){if(Array.isArray(r)){var e=[0,f.length].concat(r);f.splice.apply(f,e);i=!0;t[n]=f;return}u.TrackChanges(t,n,r)}}}function y(n){var t=n.status,i=n.command,r=n.inform,u=n.callBack;this.$watch("$data.Window.State",function(n){var f=this,r;n.name===t&&(r=function(){return f.$data.Window[i].Execute()},u(r))});this.$nextTick(function(){this.$data.Window[r]=!0})}var r,f,p;console.log("VueGlue loaded");var n="__silenter",i=null,u=null,f=null;r=new Map;r.set(undefined,null);var t=function(n){return i?(o(n,e,function(n){return et(n)}),n):n},v,ot=new Promise(function(n){v=n}),st={methods:{enumImage:function(n,t){var i,r;return!n instanceof Enum?null:(i=t||this.enumImages,!i)?null:(r=i[n.type],r?r[n.name]:null)}}};var s=Vue.adapter,ht=s.addOnReady({},function(){var n=this;y.call(this,{status:"Opened",command:"EndOpen",inform:"IsListeningOpen",callBack:function(t){return n.onOpen(t)}})}),ct=s.addOnReady({},function(){var n=this;y.call(this,{status:"Closing",command:"CloseReady",inform:"IsListeningClose",callBack:function(t){return n.onClose(t)}})}),lt={methods:{asPromise:function(n){return function(t){return new Promise(function(i,r){var u={fullfill:function(n){i(n)},reject:function(n){r(new Error(n))}};n.Execute(t,u)})}}}},h={props:{command:{type:Object,"default":null},arg:{type:Object,"default":null}},computed:{canExecute:function(){return this.command===null?!1:!this.command.hasOwnProperty("CanExecuteValue")||this.command.CanExecuteValue}},watch:{"command.CanExecuteCount":function(){this.computeCanExecute()},arg:function(){this.computeCanExecute()}},methods:{computeCanExecute:function(){this.command!==null&&this.command.CanExecute&&this.command.CanExecute(this.arg)},execute:function(){if(this.canExecute){var n=this.beforeCommand;n&&n();this.command.Execute(this.arg)}}}};h=Vue.adapter.addOnReady(h,function(){var n=this;setTimeout(function(){n.arg&&n.computeCanExecute()})});f=Vue.set;Vue.set=function(n,i,r){if(f(n,i,r),n._MappedId){e(n,i);t(r);var u=a(i,n);u(r,null)}};p={enumMixin:st,openMixin:ht,closeMixin:ct,promiseMixin:lt,commandMixin:h,silentChange:w,addProperty:ut,inject:t,silentChangeAndInject:b,disposeSilenters:d,register:function(n,r){var f,e;return console.log("VueGlue register"),u=r,f=Vue._vmMixin,!f||Array.isArray(f)||(f=[f]),e=s.addOnReady({el:"#main",mixins:f,data:n},function(){v(null)}),i=new Vue(e),window.vm=i,t(n)},ready:ot};window.glueHelper=p})();