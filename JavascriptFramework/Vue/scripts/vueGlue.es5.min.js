"use strict";(function(){function b(n,t,i){setTimeout(function(){return l(n,t,i)},0)}function l(t,i,r){var u=t[n];if(u){tt(u,i,r);return}t[i]=r}function k(n,t,i){setTimeout(function(){return d(n,t,i)},0)}function d(n,i,r){l(n,i,r);t(r)}function g(){setTimeout(nt.bind(null,Array.from(arguments)),0)}function nt(t){for(var r,u,f=t.length,i=0;i<f;i++)(r=t[i],u=r[n],u)&&(it(u),delete r[n])}function tt(n,t,i){var r=n.listeners[t];r.watch();n.father[t]=i;a(n,r,t)}function it(n){var t=n.listeners,i,r;for(i in t)r=t[i],r.watch();n.listeners={}}function a(n,t,r){t.watch=i.$watch(function(){return n.father[r]},t.callback)}function rt(n,t,i){var r={callback:i};a(n,r,t);n.listeners[t]=r}function ut(n){this.father=n;this.listeners={}}function ft(n,i,r){h(n,i,r);f(n,i);t(r)}function f(t,i){var r=t[n];r||(r=new ut(t),Object.defineProperty(t,n,{value:r,configurable:!0}));rt(r,i,v(i,t))}function e(n,t,i){var s,u,h,c,f,o;if(n&&!r.has(n._MappedId)){if(r.set(n._MappedId,n),Array.isArray(n)){for(i(n),s=n.length,u=0;u<s;u++)h=n[u],e(h,t,i);return}c=!n.__readonly__;for(f in n)(o=n[f],typeof o!="function")&&(c&&t(n,f),e(o,t,i))}}function et(n){return function(t){for(var r=[],f=[],e=[],o=t.length,i=0;i<o;i++)r.push(t[i].value),f.push(t[i].status),e.push(t[i].index);u.TrackCollectionChanges(n,r,f,e)}}function ot(n){var t=et(n),i=n.subscribe(t);n.silentSplice=function(){i();var r=n.splice.apply(n,arguments);return i=n.subscribe(t),r}}function v(n,t){var i=!1;return function(r,f){if(i){i=!1;return}if(r!==f){if(Array.isArray(r)){var e=[0,f.length].concat(r);f.splice.apply(f,e);i=!0;t[n]=f;return}u.TrackChanges(t,n,r)}}}function p(n){var t=n.status,i=n.command,r=n.inform,u=n.callBack;this.$watch("$data.Window.State",function(n){var f=this,r;n.name===t&&(r=function(){return f.$data.Window[i].Execute()},u(r))});this.$nextTick(function(){this.$data.Window[r]=!0})}function vt(n){c=n||{}}var r,h,w;console.log("VueGlue loaded");var n="__silenter",i=null,u=null,c={};r=new Map;r.set(undefined,null);var t=function(n){return i?(e(n,f,function(n){return ot(n)}),n):n},y,st=new Promise(function(n){y=n}),ht={methods:{enumImage:function(n,t){var i,r;return!n instanceof Enum?null:(i=t||this.enumImages,!i)?null:(r=i[n.type],r?r[n.name]:null)}}};var o=Vue.adapter,ct=o.addOnReady({},function(){var n=this;p.call(this,{status:"Opened",command:"EndOpen",inform:"IsListeningOpen",callBack:function(t){return n.onOpen(t)}})}),lt=o.addOnReady({},function(){var n=this;p.call(this,{status:"Closing",command:"CloseReady",inform:"IsListeningClose",callBack:function(t){return n.onClose(t)}})}),at={methods:{asPromise:function(n){return function(t){return new Promise(function(i,r){var u={fullfill:function(n){i(n)},reject:function(n){r(new Error(n))}};n.Execute(t,u)})}}}},s={props:{command:{type:Object,"default":null},arg:{required:!1,"default":null}},computed:{canExecute:function(){return this.command===null?!1:!this.command.hasOwnProperty("CanExecuteValue")||this.command.CanExecuteValue}},watch:{"command.CanExecuteCount":function(){this.computeCanExecute()},arg:function(){this.computeCanExecute()}},methods:{computeCanExecute:function(){this.command!==null&&this.command.CanExecute&&this.command.CanExecute(this.arg)},execute:function(){if(this.canExecute){var n=this.beforeCommand;n&&n();this.command.Execute(this.arg)}}}};s=Vue.adapter.addOnReady(s,function(){var n=this;setTimeout(function(){n.arg&&n.computeCanExecute()})});h=Vue.set;Vue.set=function(n,i,r){if(h(n,i,r),n._MappedId){f(n,i);t(r);var u=v(i,n);u(r,null)}};w={setOption:vt,enumMixin:ht,openMixin:ct,closeMixin:lt,promiseMixin:at,commandMixin:s,silentChange:b,addProperty:ft,inject:t,silentChangeAndInject:k,disposeSilenters:g,register:function(n,r){console.log("VueGlue register");u=r;var f=Object.assign({},c,{data:n}),e=o.addOnReady(f,function(){y(null)});return i=new Vue(e),i.$mount("#main"),t(n)},ready:st};window.glueHelper=w})();