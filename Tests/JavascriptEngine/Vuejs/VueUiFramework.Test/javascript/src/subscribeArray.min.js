"use strict"; !function () { function n(n) { return !!(n && n.constructor && n.call && n.apply) } var r = function (r, t) { function e(n, t) { Object.defineProperty(r, n, { value: t }) } function u(n, r) { var t = n.indexOf(r); t != -1 && n.splice(t, 1) } function i(n) { return b.push(n), function () { return u(b, n) } } function o() { b.forEach(function (n) { return n(A) }), A = [], E = !1 } function c(n) { if (Array.isArray(n)) { if (0 === n.length) return; A = A.concat(n) } else A.push(n); E !== !0 && (E = !0, setTimeout(o)) } function a(n) { if (b.length) { var r = n(); c(r) } } function f(n, r, t, e) { this.index = n, this.value = r, this.status = t, void 0 !== e && (this.moved = e) } function s(n, r, t) { return new f(n, r, "deleted", t) } function l(n, r, t) { return new f(n, r, "added", t) } function h(n, r, t, e) { e.push(s(n, t, r)), e.push(l(r, t, n)) } function p(n, r, t) { var e = [], u = t; return n.forEach(function (n) { return e.push(s(u++, n)) }), r.forEach(function (n) { return e.push(l(t++, n)) }), e } function v(n) { var r = []; return n.forEach(function (n, t) { return r.push(l(t, n)) }), r } function d(n) { for (var r = [], t = (n.length - 1) / 2, e = 0; e < t; e++) { var u = n.length - 1 - e, i = n[e], o = n[u]; i !== o && (h(e, u, o, r), h(u, e, i, r)) } return r } function y(n, r) { var t = String(n), e = String(r); return t.localeCompare(e) } function g(n) { var r = []; return n.forEach(function (n, t) { n.index !== t && h(n.index, t, n.el, r) }), r } if (!r || !Array.isArray(r)) throw new Error("subject should be an array"); if (!t || !n(t)) throw new Error("callBack should be a function"); if (r.addCallBack) return r.addCallBack(t); e("addCallBack", i); var b = [], A = [], E = !1, w = r.pop; e("pop", function () { var n = this, r = w.apply(this, arguments); return a(function () { return s(n.length, r) }), r }); var m = r.push; e("push", function () { var n = arguments[0], r = m.apply(this, arguments); return a(function () { return l(r - 1, n) }), r }); var x = r.shift; e("shift", function () { var n = x.apply(this, arguments); return a(function () { return s(0, n) }), n }); var k = r.splice; e("splice", function (n) { var r = n < 0 ? this.length + n : n; r > this.length && (r = this.length); var t = Array.prototype.slice.call(arguments, 2), e = k.apply(this, arguments); return a(function () { return p(e, t, r) }), e }); var B = r.unshift; e("unshift", function () { var n = arguments, r = B.apply(this, arguments); return a(function () { return v([].slice.call(n)) }), r }); var C = r.reverse; return e("reverse", function () { var n = this, r = C.apply(this, arguments); return a(function () { return d(n) }), r }), e("sort", function (n) { var r = this.map(function (n, r) { return { el: n, index: r } }), t = n ? function (r, t) { return n(r.el, t.el) } : function (n, r) { return y(n.el, r.el) }, e = Array.prototype.sort.call(r, t), u = e.map(function (n) { return n.el }); return u.unshift(0, this.length), k.apply(this, u), a(function () { return g(e) }), u.splice(2) }), i(t) }; Object.defineProperty(Array.prototype, "subscribe", { value: function (n) { return r(this, n) } }) }();